
# Chatbot Microservices Architecture

This project consists of a chatbot application implemented using a **JavaScript client**, **Node.js (Express)** backend, and a **Python microservice** that communicates with **AWS Bedrock** to generate responses using **Anthropic Claude**.

The project is set up with a **microservice architecture** using **Nginx as a reverse proxy** with **OAuth2 Proxy** for authentication.

## Table of Contents
- [Architecture Overview](#architecture-overview)
- [Technologies Used](#technologies-used)
- [Project Setup](#project-setup)
- [Running the Project](#running-the-project)
- [Services Description](#services-description)
- [API Endpoints](#api-endpoints)

---

## Architecture Overview

- **JavaScript Client**: The client sends user inputs to the backend through an HTTP request.
- **Node.js (Express) Backend**: Receives requests from the client, forwards them to the Python microservice for processing, and streams back the responses using **Server-Sent Events (SSE)**.
- **Python Microservice**: Communicates with **AWS Bedrock** to use **Anthropic Claude-3** for generating text responses based on the input.
- **Nginx Reverse Proxy with OAuth2 Proxy**: Handles authentication and routes traffic between services.

---

## Technologies Used

- **Frontend**: JavaScript, HTML5, CSS
- **Backend**: Node.js, Express.js
- **Python Microservice**: Flask, AWS SDK (boto3)
- **AI Model**: AWS Bedrock - Anthropic Claude-3
- **Containerization**: Docker (if applicable)
- **Communication**: SSE (Server-Sent Events), HTTP
- **Cloud Services**: AWS Bedrock, Anthropic Claude API
- **Authentication**: OAuth2 Proxy, Nginx

---

## Project Setup

### Prerequisites

- **Nginx** installed and configured as a reverse proxy
- **OAuth2 Proxy** configured for authentication
- **AWS CLI** configured with the necessary credentials and permissions to access AWS Bedrock

### Clone the Repository

```bash
git clone git@github.com:shalinda/chatbot.git
cd chatbot
```

---

## Running the Project

1. **Start Nginx and OAuth2 Proxy**:

   Ensure that your **Nginx** and **OAuth2 Proxy** are properly set up to handle authentication and routing to the backend services.

2. **Access the Application**:

   - The chatbot frontend will be available at: `https://chatbot.siyothsoft.com`
   - The Python microservice will be running behind the reverse proxy and can be accessed through the backend route.

---

## Services Description

### 1. **Node.js (Express) Backend**

The Node.js backend handles incoming requests from the frontend, communicates with the Python service to fetch the response generated by AWS Bedrock, and streams the response back to the client using **SSE (Server-Sent Events)**.

- **Communication with Python Service**: HTTP via Axios
- **SSE for Chat Responses**: Uses `res.write()` to send streamed responses back to the client.

### 2. **Python Microservice (AWS Bedrock)**

The Python microservice uses **Flask** to expose an API endpoint that accepts user prompts, sends the requests to AWS Bedrock using the **boto3 SDK**, and returns the generated response.

- **AWS Bedrock**: Uses `boto3` to interact with **Anthropic Claude-3** for generating text responses.

---

## API Endpoints

### Node.js Backend

- **Endpoint**: `/echo`
  - **Method**: `GET`
  - **Description**: Receives a prompt from the client and sends it to the Python microservice, then streams the generated response back to the client using SSE.

### Python Microservice

- **Endpoint**: `/generate`
  - **Method**: `POST`
  - **Description**: Receives a prompt from the Node.js service, calls AWS Bedrock, and returns the generated text.
  - **Body**: `{"prompt": "Your input text"}`

---

## Environment Variables

To configure AWS credentials, ensure your environment variables are properly set up:

- **AWS_ACCESS_KEY_ID**
- **AWS_SECRET_ACCESS_KEY**
- **AWS_REGION**

These can be set up directly in the environment or through the Nginx reverse proxy setup.

---

## License

This project is licensed under the [MIT License](LICENSE).

---

## Author

- **Shalinda** - [GitHub Profile](https://github.com/shalinda)

---

